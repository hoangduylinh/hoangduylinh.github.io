<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>calculator</title>
    <link rel="stylesheet" href="calculator.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jQuery/2.1.3/jQuery.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>

    <div class="calculator">
        <div class="header">
            <div class="theme">
                <span onclick="theme()" class="theme">Theme</span>
            </div>
            <form name="form">
                <input id="fill_in" name="textview" type="text">
            </form>
        </div>
        <div class="on-screen">
            <table>
                <tr>
                    <td><input class="button" type="button" value="C" onclick="clean()"></td>
                    <td><input class="button" type="button" value="del" onclick="del()"></td>
                    <td><input class="button divide" type="button" value=":" onclick="insertNum('/')"></td>
                    <td><input class="button multi" type="button" value="x"  onclick="phepNhan('*')"></td>
    
                </tr>
                <tr>
                    <td><input class="button" type="button" value="!" onclick="giaiThua('!')"></td>
                    <td><input class="button" type="button" value="sqrt" onclick="canBac2()"></td>
                    <td><input class="button" type="button" value="^" onclick="binhPhuong()"></td>
                    <td><input class="button" type="button" value="+" onclick="insertNum('+')"></td>
                </tr>
    
                <tr>
                    <td><input class="button number" type="button" value="1" onclick="insertNum(1)"></td>
                    <td><input class="button number" type="button" value="2" onclick="insertNum(2)"></td>
                    <td><input class="button number" type="button" value="3" onclick="insertNum(3)"></td>
                    <td><input class="button number" type="button" value="-" onclick="insertNum('-')"></td>
    
                </tr>
                <tr>
                    <td><input class="button number" type="button" value="4" onclick="insertNum(4)"></td>
                    <td><input class="button number" type="button" value="5" onclick="insertNum(5)"></td>
                    <td><input class="button number" type="button" value="6" onclick="insertNum(6)"></td>
                    <td><input class="button" type="button" value="%" onclick="insertNum('%')"></td>
    
                </tr>
                <tr>
                    <td><input class="button number" type="button" value="7" onclick="insertNum(7)"></td>
                    <td><input class="button number" type="button" value="8" onclick="insertNum(8)"></td>
                    <td><input class="button number" type="button" value="9" onclick="insertNum(9)"></td>
                    <td rowspan="2"><input class="button" style="height: 120px;" type="button" value="=" onclick="equal()">
                    </td>
                </tr>
                <tr>
                    <div class="zero"><td colspan="2"><input class="button" style="width: 120px;" type="button" value="0"
                        onclick="insertNum(0)"></td></div>
                    <td><input class="button" type="button" value="." onclick="insertNum('.')"></td>
    
                </tr>
            </table>
        </div>
    </div>

    <script>
          // lấy giá trị 

          
          function insertNum(num) {

document.getElementById("fill_in").value = document.getElementById("fill_in").value + num;
}
function phepNhan(y){
document.getElementById("fill_in").value = document.getElementById("fill_in").value + y;


}

// tính giai thừa
function giaiThua(x) {
let giai_thua = 1;
if (document.getElementById("fill_in").value == 0 || document.getElementById("fill_in").value == 1) {
    document.getElementById("fill_in").value = giai_thua;
} else {
    for (let i = 2; i <= document.getElementById("fill_in").value; i++) {
        giai_thua *= i;
    }
    document.getElementById("fill_in").value = giai_thua;
}

}
// tính căn bậc 2


function canBac2(x) {

let result = Math.sqrt(document.getElementById("fill_in").value);
document.getElementById("fill_in").value = result;
}
// tính bình phương
function binhPhuong(x) {

let result = Math.pow(document.getElementById("fill_in").value, document.getElementById("fill_in").value)
document.getElementById("fill_in").value = result;
}
// lấy kết quả của phép tính

function equal() {

let result = eval(document.getElementById("fill_in").value);
document.getElementById("fill_in").value = result;

}
// xóa dữ liệu về o
function clean() {

document.getElementById("fill_in").value = "";

}
// xóa đi 1 phần tử
function del() {

let del = document.getElementById("fill_in").value;
document.getElementById("fill_in").value = del.substring(0, del.length - 1);

}

        //Thực thi kết quả trong ô giá trị, thay thế x = *, ÷ = /
        $('table button.equal').on('click', function(){
            result = $('#calculator #display').html();
            result = result.replaceAll("×" , "*");
            result = result.replaceAll("÷" , "/");
            $('#calculator #display').html(eval(result));
        });
        // theme
        function theme() {
            document.querySelector(".calculator").classList.toggle("change-color");
}


    </script>
</body>

</html>